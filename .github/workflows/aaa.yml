name: Workflow réutilisé

on:  
  workflow_call: # Déclencheur : lorsque le workflow est appelé
    # Map les outputs du workflow avec les outputs du job job1
    outputs:
      variable1:
        description: "Premier output"
        value: ${{ jobs.job1.outputs.sortie1 }}
      variable2:
        description: "Deuxième output"
        value: ${{ jobs.job1.outputs.sortie2 }}

jobs:
  job1:
    name: Génère les outputs
    runs-on: ubuntu-latest
    outputs: # Map les outputs du job job1 avec les outputs des steps etape1 et etape2
      sortie1: ${{ steps.etape1.outputs.var1 }}
      sortie2: ${{ steps.etape2.outputs.var2 }}
    steps:
      - id: etape1
        # On récupère la sortie dans GITHUB_OUTPUT pour pouvoir la réutiliser par la suite
        # GITHUB_OUTPUT est un fichier d'environnement partagé entre tous les steps d'un job
        run: echo "var1=Hello" >> $GITHUB_OUTPUT 
      - id: etape2
        run: echo "var2=world!" >> $GITHUB_OUTPUT
      - id: etape3
        run: echo ${{ steps.etape1.outputs.var1 }}${{ steps.etape2.outputs.var2 }}

